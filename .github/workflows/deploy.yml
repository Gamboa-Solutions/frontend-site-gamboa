name: SSH and List Directories

on:
  push:

jobs:
  list-dir:
    runs-on: ubuntu-latest

    steps:
        - name: Connect via SSH
          run: |
            echo "${{ secrets.SSH_PRIVATE_KEY }}" > deploy_key
            chmod 600 deploy_key
            sudo apt-get install -y sshpass
            sshpass -p ${{ secrets.SSH_PASSWORD }} ssh -o StrictHostKeyChecking=no -p ${{ secrets.SSH_PORT }} -i deploy_key ${{ secrets.SSH_USERNAME }}@${{ secrets.SSH_HOST }} "ls -al"
            rm -f deploy_key
          shell: /usr/bin/bash -e {0}


